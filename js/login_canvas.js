(function(){var canvasEL=document.getElementById("canvas"),ctx=canvasEL.getContext("2d");var nodes=[],edges=[],mousePos=[0,0];var bgcolor="#000",nodeColor="#fff",edgeColor="#ff6e42",easingFactor=5;function constructNodes(){for(var i=0;i<100;i++){var node={drivenByMouse:i===0,x:Math.random()*canvasEL.width,y:Math.random()*canvasEL.height,vx:Math.random()*1-0.5,vy:Math.random()*1-0.5,radius:Math.random()>0.9?3+Math.random()*3:1+Math.random()*3};nodes.push(node)}addEdges(nodes)}function addEdges(nodes){nodes.forEach(function(e){nodes.forEach(function(e2){if(e===e2){return}var isexist=false,edge={from:e,to:e2};edges.forEach(function(e){if(edge.from===e.from&&edge.to===e.to){isexist=true}if(edge.from===e.to&&edge.to===e.from){isexist=true}});if(!isexist){edges.push(edge)}})})}function step(){nodes.forEach(function(e){if(e.drivenByMouse){return}e.x+=e.vx;e.y+=e.vy;if(e.x<=0||e.x>=canvasEL.width){e.vx*=-1;e.x=clamp(0,canvasEL.width,e.x)}if(e.y<=0||e.y>=canvasEL.height){e.vy*=-1;e.y=clamp(0,canvasEL.height,e.y)}});addFirstNodeDrivenByMouse();render();window.requestAnimationFrame(step)}function clamp(min,max,value){if(value<=min){return min}else{return max}}function addFirstNodeDrivenByMouse(){nodes[0].x+=(mousePos[0]-nodes[0].x)/easingFactor;nodes[0].y+=(mousePos[1]-nodes[0].y)/easingFactor}window.onmousemove=function(e){mousePos[0]=e.clientX;mousePos[1]=e.clientY};function lengthOfEdge(edge){return Math.sqrt(Math.pow((edge.from.x-edge.to.x),2)+Math.pow((edge.from.y-edge.to.y),2))}function render(){ctx.fillStyle=bgcolor;ctx.fillRect(0,0,canvasEL.width,canvasEL.height);edges.forEach(function(e){var L=lengthOfEdge(e),threshold=canvasEL.width/8;if(L>threshold){return}ctx.strokeStyle=edgeColor;ctx.lineWidth=(1-L/threshold)*2.5;ctx.globalAlpha=1-L/threshold;ctx.beginPath();ctx.moveTo(e.from.x,e.from.y);ctx.lineTo(e.to.x,e.to.y);ctx.stroke()});ctx.globalAlpha=1;nodes.forEach(function(e){if(e.drivenByMouse){return}ctx.fillStyle=nodeColor;ctx.beginPath();ctx.arc(e.x,e.y,e.radius,0,2*Math.PI);ctx.closePath();ctx.fill()})}window.onresize=function(){canvasEL.width=document.body.clientWidth;canvasEL.height=document.body.clientHeight;if(nodes.length===0){constructNodes()}render()};window.onresize();window.requestAnimationFrame(step)})();